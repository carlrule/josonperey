<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="shortcut icon" type="x-icon" href="assets/images/Tab Logo/logo.webp">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/myappointment.css">
    <link rel="stylesheet" href="assets/css/username-indicator.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.8.0/css/pikaday.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.8.0/pikaday.min.js"></script>
    <title>Joson-Perey Dental Clinic</title>
    <link rel="stylesheet" href="assets/UserAppointmentBook/style.css">
    <script src="assets/UserAppointmentBook/script.js" defer></script>
    <link rel="stylesheet" href="style.css">
    <style>
       *{
        font-family: 'Roboto', sans-serif!important;
       }
    </style>
</head>

<body style="background: white;" class="">
    <!-- Header -->
    <header>
        <div class="top-header">
            <p >Opening Hours: 8 AM - 5 PM, closed every Wednesday and Sunday</p>
        </div>

        <div class="navbar" style="padding-top:10px;padding-bottom: 10px;">
            <div class="logo">
                <img src="assets/images/Header/logo.png" alt="Logo Image">
                <div class="logo-text">Joson-Perey</div>
            </div>
            <div class="hamburger">
                <div></div>
                <div></div>
                <div></div>
            </div>
            <ul class="nav-links" style="margin-bottom: 0px;">
                <li><a onclick="home()" class="header-links" href="#home">Home</a></li>
                <li><a onclick="services()" class="header-links" href="#services">Services</a></li>
                <li><a onclick="doctors()" class="header-links" href="#doctors">Doctors</a></li>
                <li><a onclick="aboutus()" class="header-links" href="#about-us">About Us</a></li>
                <li><a onclick="contact()" class="header-links" href="#contact">Contact</a></li>
                <a onclick="bookAppointment()" class="book-appointment" href="#book-appointment">Book Appointment</a>
            </ul>
        </div>

        <div class="username-indicator" id="username-indicator" style="display: none;">
            <p>You are logged in as: <span id="username-span"></span></p>
        </div>
    </header>
<style>
    .container{
        padding: 0px!important;
    }
</style>
    <!-- Top -->
    <section class="top" id="top">
        <div class="topContainer"></div>
    </section>
    <div class="container"
        style="box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19); ">
        <div class="steps">
            <span style="cursor: pointer;" class="circle active" id="step_1">1</span>
            <span style="cursor: pointer;" class="circle  " id="step_2">2</span>
            <span style="cursor: pointer;" class="circle" id="step_3">3</span>
            <span style="cursor: pointer;" class="circle" id="step_4">4</span>
            <span style="cursor: pointer;" class="circle" id="step_5">5</span>
            <span style="cursor: pointer;" class="circle" id="step_6">6</span>
            <div class="progress-bar">
                <span class="indicator"></span>
            </div>
        </div>
        <div class="container ">
            <!-- <div class="book"> -->
            <iframe class="" id="myIframe" src="assets/UserAppointmentBook/step1.html" frameborder="0" allowfullscreen="" style="overflow: auto!important;" scrolling="no"></iframe>
            <!-- </div> -->
            <div style="display: none;">
                <input class="appointment_textfield" type="text" id="doctor_step1" placeholder="Doctor" required
                    readonly>
                <input class="appointment_textfield" type="hidden" id="services_step2" placeholder="Services" required
                    readonly>
                <input class="appointment_textfield" type="hidden" id="date_step3" placeholder="Date" required readonly>
                <input class="appointment_textfield" type="hidden" id="time_step3" placeholder="Time" required readonly>

                <input class="appointment_textfield" type="hidden" id="last_name" required>
                <input class="appointment_textfield" type="hidden" id="first_name" required>
                <input class="appointment_textfield" type="hidden" id="email" required>
                <input class="appointment_textfield" type="hidden" id="phone_number" required>
                <input class="appointment_textfield" type="hidden" id="middle_name" required>
                <input class="appointment_textfield" type="hidden" id="gender" required>
                <input class="appointment_textfield" type="hidden" id="address" required>
                <input class="appointment_textfield" type="hidden" id="civil_status" required>
                <input class="appointment_textfield" type="hidden" id="birthday" required>
            </div>
            <p id="errorMsg" style="color: red;"></p>
            <div class="buttons " style="margin-bottom: 20px;">
                <button id="prev"  disabled>Back</button>
                <button id="next" class="next-btn-class">Next</button>
            </div>
        </div>
    </div>

</body>
<script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>

<footer>
    <p>Joson-Perey Dental Clinic</p>
</footer>

<!-- Scroll-to-top button -->
<div class="scroll-to-top" id="scrollToTop" title="Go to top">
    <i class="fas fa-arrow-up"></i>
</div>

<!-- Firebase configuration -->
<script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database-compat.js"></script>

<!-- Script -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js">
</script>
<script type="text/javascript">
    (function () {
        emailjs.init("Zd7ztlVp0Jm4G__pe");
    })();
</script>
<script src="assets/js/headerlinks.js"></script>
<script src="assets/js/myappointment.js"></script>
<script src="assets/js/body.js"></script>
<script src="assets/js/homeslider.js"></script>
<script>
  
   $(document).ready(function(){

// Function to run every second
function checkc_iframe() {
    var iframeSrc = document.getElementById('myIframe').src;
// console.log(iframeSrc)
if (iframeSrc.indexOf("payment.html") > -1) {
    // If the iframe src contains "payment.html", call the function immediately
    $('.next-btn-class').attr('disabled',true)
    setInterval(everySecondFunction, 2000);
    // everySecondFunction();   
}
}
setInterval(checkc_iframe, 2000);
function everySecondFunction() {
    // Get data from localStorage
    var paid_payment_check = localStorage.getItem('paid_payment_check');
    // console.log("User data:", paid_payment_check);
    const options = {
  method: 'GET',
  headers: {
    accept: 'application/json',
    authorization: 'Basic c2tfdGVzdF9OaHhFaERjVHk1NHdGQmR6WEdpcVVVdWE6UGFzc3dvcmQhMjAyNA=='
  }
};

$.ajax({
  url: 'https://api.paymongo.com/v1/links/'+paid_payment_check,
  type: options.method,
  headers: options.headers,
  success: function(response) {
    if(response.data.attributes.status == 'paid'){
        $('.next-btn-class').attr('disabled',false)
        $('.next-btn-class').removeClass('next-btn-class')
    }
  },
  error: function(err) {
    console.error(err);
  }
});

}



   })
</script>
</html>